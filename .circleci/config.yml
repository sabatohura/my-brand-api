version: 2.1
orbs:
  node: circleci/node@5.0.2
  codecov: codecov/codecov@4.0.1

jobs:
  test-node:
    executor: node/default
    steps:
      - checkout
      - node/install-packages:
          pkg-manager: npm
      - run:
          name: Install Dependencies
          command: npm i --save
      - run:
          name: compile tsc
          command: npm run build
      - run:
          name: Run tests
          command: npm run test

  # deploy:
  #   # This is an example deploy job, not actually used by the workflow
  #   docker:
  #     - image: cimg/base:stable
  #   steps:
  #     # Replace this with steps to deploy to users
  #     - run:
  #         name: deploy
  #         command: "#e.g. ./deploy.sh"
# workflows:
#   upload-to-codecov:
#     jobs:
#       - checkout
#       - codecov/upload
#   build-and-test:
#     jobs:
#       - test-node
#     # - deploy:
#     #     requires:
#     #       - test-node
